<script lang="ts">
	import FullscreenComic from './FullscreenComic.svelte';
	import FullscreenGif from './FullscreenGif.svelte';
	import FullscreenImage from './FullscreenImage.svelte';
	import FullscreenVideo from './FullscreenVideo.svelte';

	interface Props {
		post: kurosearch.Post;
		ondetails: () => void;
		onended?: () => void;
		startAt?: number;
	}

	let { post, onended, ondetails, startAt }: Props = $props();
</script>

<div>
	{#if post.type === 'video'}
		<FullscreenVideo {post} {onended} {ondetails} {startAt} />
	{:else if post.type === 'gif'}
		<FullscreenGif {post} {onended} {ondetails} />
	{:else if post.width / post.height < 0.4}
		<FullscreenComic {post} {onended} {ondetails} />
	{:else}
		<FullscreenImage {post} {onended} {ondetails} />
	{/if}
</div>

<style lang="scss">
	div {
		height: 100vh;
		width: 100vw;
		contain: strict;
		scroll-snap-align: start;
		scroll-snap-stop: always;
	}
</style>
